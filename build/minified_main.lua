local b={players={},bodies={}}function b:add(d)if d.object.type=="character"then if self.players[d.object.id]~=nil then self.players[d.object.id].object=d.object else self.players[d.object.id]=d end elseif d.object.type=="body"then if self.bodies[d.object.id]~=nil then self.bodies[d.object.id].object=d.object else self.bodies[d.object.id]=d end end end function b:update(d)local e={}for f in d do b:add(a(f))end for f,g in pairs(self.players)do if not e[f]then if g.not_seen>200 then self.players[f]=nil else self.players[f].not_seen=g.not_seen+1 end end end for f,g in pairs(self.bodies)do if not e[f]then if g.not_seen>200 then self.bodies[f]=nil else self.bodies[f].not_seen=g.not_seen+1 end end end end function a(d)return{object={id=d[1],hangle=d[2],vangle=d[3],distance=d[4],force=d[5],type=d[6]},dir_vector=sm.vec3.new(0,0,0),not_seen=0}end local c={radar={},angle=0,fov={h=math.pi,v=math.pi},rotation_speed=10,}function c:getTargets()return self.radar.getTargets()end function c:register()self.radar=getComponent("radar")self:update({rotate=false,update_system=true})end function c:update(d)if d~=nil then if d.update_system then if radar.getHFov()~=self.fov.h then radar.setHFov(self.fov.h)end if radar.getVFov()~=self.fov.v then radar.setVFov(self.fov.v)end end if d.rotate then self.angle=self.angle+self.rotation_speed if self.angle>360 then self.angle=self.angle-360 end end end radar.setAngle(math.rad(self.angle))end print("Hello world")